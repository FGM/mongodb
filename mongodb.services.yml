services:
  mongo:
    class: Drupal\mongodb\MongoCollectionFactory
    arguments: ['@settings']
  cache.backend.mongodb:
    class: Drupal\mongodb\Cache\MongoDBBackendFactory
    arguments: ['@mongo', '@settings']
  keyvalue.mongodb:
    class: Drupal\mongodb\KeyValueFactory
    arguments: ['@mongo', '@settings']
  keyvalue.mongodb:
    class: Drupal\mongodb\Queue\QueueFactory
    arguments: ['@mongo']
  mongodb.flood:
    class: Drupal\mongodb\Flood\MongoDBBackend
    arguments: ['@mongo', '@request']
    tags:
      - { name: mongodb.override }
  mongodb.file.usage:
    class: Drupal\mongodb\FileUsage
    arguments: ['@mongo']
    tags:
      - { name: mongodb.override }
  mongodb.config.cachedstorage.storage:
    class: Drupal\mongodb\Config\ConfigStorage
    factory_class: Drupal\mongodb\Config\ConfigStorageFactory
    factory_method: getActive
    arguments: ['@mongo', '@string_translation']
    tags:
      - { name: mongodb.override }
  mongodb.config.storage.snapshot:
    class: Drupal\mongodb\Config\ConfigStorage
    arguments: ['@mongo', '@string_translation', snapshot]
    tags:
      - { name: mongodb.override }
  mongodb.path.crud:
    class: Drupal\mongodb\Path
    arguments: ['@mongo', '@module_handler', '@path.alias_manager']
#    Disabled until we move path queries to one class.
#    tags:
#      - { name: mongodb.override }
