parameters:
  mongodb.watchdog_alias: 'default'

services:
  mongodb.watchdog_storage:
    class: 'MongoDB'
    factory_service: 'mongodb.database_factory'
    factory_method: 'get'
    arguments: ['%mongodb.watchdog_alias%']

  mongodb.logger:
    class: Drupal\mongodb_watchdog\Logger
    arguments: ['@mongodb.watchdog_storage', '@logger.log_message_parser']
    tags:
      - { name: logger }
